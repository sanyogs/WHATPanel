<?php 
/*
 * This file is part of WHATPANEL.
 *
 * @package     WHAT PANEL â€“ Web Hosting Access Terminal Panel.
 * @copyright   2023-2024 Version Next Technologies and MadPopo. All rights reserved.
 * @license     BSL; see LICENSE.txt
 * @link        https://www.version-next.com
 */

use App\Libraries\AppLib;
use App\Models\App;
use App\Models\Client;
use App\Models\Invoice;
use App\Models\Item;
use App\Models\Payment;
use App\Models\User;

use App\Helpers\custom_name_helper;

$custom = new custom_name_helper();
?>
<?= $this->extend('layouts/users') ?>

<?= $this->section('content') ?>

<section id="hosting-services-wrap">
	<div class="container px-0">
		<div class="hs-topbar-wrap">
			<div class="hs-title-wrap">
				<h3>Payments</h3>
				<p>Showing payments list</p>
			</div>
			<div class="hs-search-wrap">
				<div class="hs-InputWrap">
					<span>
						<svg xmlns="http://www.w3.org/2000/svg" width="18" height="15" viewBox="0 0 18 15" fill="none">
							<path d="M1.36083 13.5869L4.9727 11.4839C6.06246 12.9679 7.67959 13.9784 9.4916 14.3078C11.3036 14.6371 13.1727 14.2602 14.7147 13.2545C16.2566 12.2488 17.3542 10.6908 17.7816 8.90083C18.2091 7.11086 17.934 5.22499 17.0129 3.63098C16.0918 2.03698 14.5947 0.856004 12.8295 0.330892C11.0642 -0.19422 9.16497 -0.0235551 7.52228 0.807794C5.87959 1.63914 4.61831 3.06798 3.99777 4.80052C3.37723 6.53306 3.44461 8.4376 4.18605 10.1225L0.580387 12.2024C0.488711 12.2548 0.408327 12.3248 0.343873 12.4084C0.279418 12.492 0.232171 12.5875 0.204853 12.6895C0.177535 12.7914 0.170689 12.8978 0.18471 13.0024C0.198731 13.107 0.233342 13.2079 0.286544 13.2991C0.39336 13.4769 0.565107 13.6063 0.765541 13.66C0.965975 13.7137 1.17942 13.6875 1.36083 13.5869ZM5.34694 5.79003C5.63343 4.72083 6.23079 3.76066 7.06346 3.03094C7.89614 2.30122 8.92674 1.83472 10.0249 1.69044C11.1231 1.54616 12.2396 1.73058 13.2332 2.22037C14.2267 2.71016 15.0528 3.48332 15.6068 4.4421C16.1608 5.40087 16.418 6.50218 16.3457 7.60677C16.2735 8.71136 15.8751 9.76962 15.201 10.6477C14.5268 11.5258 13.6071 12.1843 12.5583 12.5399C11.5094 12.8956 10.3785 12.9323 9.3085 12.6456C7.87365 12.2612 6.65019 11.3229 5.90726 10.0372C5.16432 8.75154 4.96277 7.22378 5.34694 5.79003Z" fill="white" />
						</svg>
					</span>
					<form method='get' action="<?php echo base_url('payments'); ?>" id="searchForm">
						<input type="text" name="search" placeholder="Search for Code" />
						<a href="<?php echo base_url('payments'); ?>" class="btn new-hosting-div bg-danger clrBtn">Clear</a>
				 	</form>
				</div>
			</div>
		</div>
		<div class="hs-table-wrap">
			<div class="tableInfoHead">
				<div class="showEntriesWrap">
					<span>Show</span>
					<form action="<?php echo base_url('payments'); ?>" method="get">
						<select name="recordsPerPage" onchange="this.form.submit()">
							<?php $options = [10, 25, 50, 100]; ?>
							<?php foreach ($options as $option) : ?>
							<option value="<?= $option ?>" <?= ($option == $perPage) ? 'selected' : '' ?>>
								<?= $option ?>
							</option>
							<?php endforeach; ?>
						</select>
					</form>
					<span>Entries</span>
				</div>
				<div class="filterWrap">
					<button>
						<span>
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
								<g clip-path="url(#clip0_1514_132)">
									<path d="M0.666667 3.16684H2.49067C2.63376 3.69333 2.94612 4.1581 3.37955 4.48946C3.81299 4.82082 4.34341 5.00035 4.889 5.00035C5.43459 5.00035 5.96501 4.82082 6.39845 4.48946C6.83188 4.1581 7.14424 3.69333 7.28733 3.16684H15.3333C15.5101 3.16684 15.6797 3.0966 15.8047 2.97158C15.9298 2.84655 16 2.67698 16 2.50017C16 2.32336 15.9298 2.15379 15.8047 2.02877C15.6797 1.90374 15.5101 1.83351 15.3333 1.83351H7.28733C7.14424 1.30702 6.83188 0.842243 6.39845 0.510885C5.96501 0.179527 5.43459 0 4.889 0C4.34341 0 3.81299 0.179527 3.37955 0.510885C2.94612 0.842243 2.63376 1.30702 2.49067 1.83351H0.666667C0.489856 1.83351 0.320286 1.90374 0.195262 2.02877C0.0702379 2.15379 0 2.32336 0 2.50017C0 2.67698 0.0702379 2.84655 0.195262 2.97158C0.320286 3.0966 0.489856 3.16684 0.666667 3.16684ZM4.88867 1.33351C5.11941 1.33351 5.34497 1.40193 5.53683 1.53012C5.72869 1.65832 5.87822 1.84053 5.96653 2.05371C6.05483 2.26689 6.07793 2.50147 6.03292 2.72778C5.9879 2.95409 5.87679 3.16197 5.71362 3.32513C5.55046 3.48829 5.34258 3.59941 5.11627 3.64442C4.88996 3.68944 4.65538 3.66633 4.4422 3.57803C4.22902 3.48973 4.04681 3.3402 3.91862 3.14834C3.79042 2.95648 3.722 2.73092 3.722 2.50017C3.72235 2.19086 3.84538 1.89432 4.0641 1.6756C4.28281 1.45689 4.57936 1.33386 4.88867 1.33351Z" fill="#172F78" />
									<path d="M15.3333 7.33318H13.5093C13.3665 6.80657 13.0542 6.34163 12.6208 6.01013C12.1874 5.67864 11.657 5.49902 11.1113 5.49902C10.5657 5.49902 10.0352 5.67864 9.60182 6.01013C9.16842 6.34163 8.85619 6.80657 8.71333 7.33318H0.666667C0.489856 7.33318 0.320286 7.40342 0.195262 7.52844C0.0702379 7.65347 0 7.82304 0 7.99985C0 8.17666 0.0702379 8.34623 0.195262 8.47125C0.320286 8.59627 0.489856 8.66651 0.666667 8.66651H8.71333C8.85619 9.19312 9.16842 9.65807 9.60182 9.98956C10.0352 10.3211 10.5657 10.5007 11.1113 10.5007C11.657 10.5007 12.1874 10.3211 12.6208 9.98956C13.0542 9.65807 13.3665 9.19312 13.5093 8.66651H15.3333C15.5101 8.66651 15.6797 8.59627 15.8047 8.47125C15.9298 8.34623 16 8.17666 16 7.99985C16 7.82304 15.9298 7.65347 15.8047 7.52844C15.6797 7.40342 15.5101 7.33318 15.3333 7.33318ZM11.1113 9.16651C10.8806 9.16651 10.655 9.09809 10.4632 8.96989C10.2713 8.8417 10.1218 8.65949 10.0335 8.44631C9.94517 8.23313 9.92207 7.99855 9.96708 7.77224C10.0121 7.54593 10.1232 7.33805 10.2864 7.17489C10.4495 7.01173 10.6574 6.90061 10.8837 6.8556C11.11 6.81058 11.3446 6.83368 11.5578 6.92199C11.771 7.01029 11.9532 7.15982 12.0814 7.35168C12.2096 7.54354 12.278 7.7691 12.278 7.99985C12.2776 8.30916 12.1546 8.6057 11.9359 8.82441C11.7172 9.04313 11.4206 9.16616 11.1113 9.16651Z" fill="#172F78" />
									<path d="M15.3333 12.8335H7.28733C7.14424 12.307 6.83188 11.8422 6.39845 11.5109C5.96501 11.1795 5.43459 11 4.889 11C4.34341 11 3.81299 11.1795 3.37955 11.5109C2.94612 11.8422 2.63376 12.307 2.49067 12.8335H0.666667C0.489856 12.8335 0.320286 12.9037 0.195262 13.0288C0.0702379 13.1538 0 13.3234 0 13.5002C0 13.677 0.0702379 13.8466 0.195262 13.9716C0.320286 14.0966 0.489856 14.1668 0.666667 14.1668H2.49067C2.63376 14.6933 2.94612 15.1581 3.37955 15.4895C3.81299 15.8208 4.34341 16.0003 4.889 16.0003C5.43459 16.0003 5.96501 15.8208 6.39845 15.4895C6.83188 15.1581 7.14424 14.6933 7.28733 14.1668H15.3333C15.5101 14.1668 15.6797 14.0966 15.8047 13.9716C15.9298 13.8466 16 13.677 16 13.5002C16 13.3234 15.9298 13.1538 15.8047 13.0288C15.6797 12.9037 15.5101 12.8335 15.3333 12.8335ZM4.88867 14.6668C4.65792 14.6668 4.43236 14.5984 4.2405 14.4702C4.04864 14.342 3.89911 14.1598 3.81081 13.9466C3.72251 13.7335 3.6994 13.4989 3.74442 13.2726C3.78943 13.0463 3.90055 12.8384 4.06371 12.6752C4.22687 12.5121 4.43475 12.4009 4.66106 12.3559C4.88737 12.3109 5.12195 12.334 5.33513 12.4223C5.54831 12.5106 5.73052 12.6602 5.85871 12.852C5.98691 13.0439 6.05533 13.2694 6.05533 13.5002C6.0548 13.8094 5.93172 14.1059 5.71304 14.3245C5.49436 14.5432 5.19792 14.6663 4.88867 14.6668Z" fill="#172F78" />
								</g>
								<defs>
									<clipPath id="clip0_1514_132">
										<rect width="16" height="16" fill="white" />
									</clipPath>
								</defs>
							</svg>
						</span>
						Filter
					</button>
					<div class="hs-dateWrap">
						<span>
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
								<path d="M12.6667 1.33333H12V0.666667C12 0.298667 11.702 0 11.3333 0C10.9647 0 10.6667 0.298667 10.6667 0.666667V1.33333H5.33333V0.666667C5.33333 0.298667 5.03533 0 4.66667 0C4.298 0 4 0.298667 4 0.666667V1.33333H3.33333C1.49533 1.33333 0 2.82867 0 4.66667V12.6667C0 14.5047 1.49533 16 3.33333 16H12.6667C14.5047 16 16 14.5047 16 12.6667V4.66667C16 2.82867 14.5047 1.33333 12.6667 1.33333ZM3.33333 2.66667H12.6667C13.7693 2.66667 14.6667 3.564 14.6667 4.66667V5.33333H1.33333V4.66667C1.33333 3.564 2.23067 2.66667 3.33333 2.66667ZM12.6667 14.6667H3.33333C2.23067 14.6667 1.33333 13.7693 1.33333 12.6667V6.66667H14.6667V12.6667C14.6667 13.7693 13.7693 14.6667 12.6667 14.6667ZM12.6667 9.33333C12.6667 9.70133 12.3687 10 12 10H4C3.63133 10 3.33333 9.70133 3.33333 9.33333C3.33333 8.96533 3.63133 8.66667 4 8.66667H12C12.3687 8.66667 12.6667 8.96533 12.6667 9.33333ZM8 12C8 12.368 7.702 12.6667 7.33333 12.6667H4C3.63133 12.6667 3.33333 12.368 3.33333 12C3.33333 11.632 3.63133 11.3333 4 11.3333H7.33333C7.702 11.3333 8 11.632 8 12Z" fill="#172F78" />
							</svg>
						</span>
						<input type="text" class="datepicker" />
					</div>
				</div>
			</div>
			<div class="hs-table-overflow">
				<table class="hs-table">
					<tr>
						<th class="w_5 hidden"></th>
						<th><?= lang('hd_lang.invoice') ?></th>
						<th><?= lang('hd_lang.client') ?></th>
						<th><?= lang('hd_lang.payment_date') ?></th>
						<th><?= lang('hd_lang.invoice_date') ?></th>
						<th><?= lang('hd_lang.amount') ?></th>
						<th><?= lang('hd_lang.payment_method') ?></th>
						<th><?= lang('hd_lang.options') ?></th>
					</tr>
					<?php 
	if(!empty($payments)) {
	
	foreach ($payments as $key => $p) { ?>
						<tr>
							<?php
							$currency = Invoice::view_by_id($p->invoice)->currency;
							$invoice_date = Invoice::view_by_id($p->invoice)->date_saved;
							$invoice_date = strftime($custom->getconfig_item('date_format'), strtotime($invoice_date));
							?>
							<td class="hidden"><?= $p->p_id ?></td>

							<td style="border-left: 2px solid <?= ($p->refunded != 'Yes') ? '#1AB394' : '#e05d6f'; ?>;">

								<a class="text-info" href="<?= base_url() ?>payments/view/<?= $p->p_id ?>">
									<?php echo Invoice::view_by_id($p->invoice)->reference_no; ?></a>
							</td>

							<td>
								<?php

								// $company_name = Client::view_by_id($p->paid_by)->company_name;

								$client = Client::view_by_id($p->paid_by);
								if ($client !== null) {
									$company_name = $client->company_name;
									echo $company_name;
								} ?>
							</td>
							<td><?= strftime($custom->getconfig_item('date_format'), strtotime($p->payment_date)); ?></td>
							<td><?= $invoice_date ?></td>

							<td class="col-currency <?= ($p->refunded == 'Yes') ? 'text-lt text-danger' : ''; ?>">
								<strong>
									<?= Applib::format_currency($p->amount, 'default_currency') ?>
								</strong>
							</td>

							<td><?php echo App::get_method_by_id($p->payment_method); ?></td>

							<td>
								<div class="tableIcon">
									<a href="<?= base_url() ?>payments/view/<?= $p->p_id ?>" data-original-title="<?= lang('hd_lang.view_payment') ?>">
										<svg xmlns="http://www.w3.org/2000/svg" width="22" height="16" viewBox="0 0 22 16" fill="none">
											<path d="M21.1741 7.272C20.3937 5.56533 17.3332 0 10.6666 0C3.99989 0 0.939441 5.56533 0.158997 7.272C0.0542307 7.50071 0 7.74932 0 8.00089C0 8.25246 0.0542307 8.50107 0.158997 8.72978C0.939441 10.4347 3.99989 16 10.6666 16C17.3332 16 20.3937 10.4347 21.1741 8.728C21.2787 8.49954 21.3328 8.25125 21.3328 8C21.3328 7.74875 21.2787 7.50046 21.1741 7.272ZM10.6666 14.2222C5.06033 14.2222 2.44433 9.45244 1.77766 8.00978C2.44433 6.54756 5.06033 1.77778 10.6666 1.77778C16.2594 1.77778 18.8763 6.52711 19.5554 8C18.8763 9.47289 16.2594 14.2222 10.6666 14.2222Z" fill="#1912D3"></path>
											<path d="M10.6671 3.55566C9.78807 3.55566 8.92879 3.81633 8.1979 4.30469C7.46702 4.79305 6.89736 5.48718 6.56097 6.29929C6.22458 7.11141 6.13657 8.00504 6.30806 8.86718C6.47955 9.72931 6.90284 10.5212 7.52441 11.1428C8.14597 11.7644 8.9379 12.1877 9.80003 12.3592C10.6622 12.5306 11.5558 12.4426 12.3679 12.1062C13.18 11.7699 13.8742 11.2002 14.3625 10.4693C14.8509 9.73842 15.1115 8.87914 15.1115 8.00011C15.1101 6.8218 14.6414 5.69216 13.8082 4.85897C12.9751 4.02578 11.8454 3.55708 10.6671 3.55566ZM10.6671 10.6668C10.1397 10.6668 9.62411 10.5104 9.18558 10.2174C8.74705 9.92434 8.40526 9.50787 8.20342 9.0206C8.00159 8.53333 7.94878 7.99715 8.05167 7.47987C8.15457 6.96259 8.40854 6.48743 8.78148 6.11449C9.15442 5.74155 9.62958 5.48757 10.1469 5.38468C10.6641 5.28179 11.2003 5.3346 11.6876 5.53643C12.1749 5.73826 12.5913 6.08006 12.8844 6.51859C13.1774 6.95712 13.3338 7.47269 13.3338 8.00011C13.3338 8.70735 13.0528 9.38563 12.5527 9.88573C12.0526 10.3858 11.3743 10.6668 10.6671 10.6668Z" fill="#1912D3"></path>
										</svg>
									</a>
									<a href="<?= base_url() ?>payments/pdf/<?= $p->p_id ?>" data-original-title="<?= lang('hd_lang.pdf') ?> <?= lang('hd_lang.receipt') ?>" data-bs-toggle="modal" data-bs-target="#add-server-modal-div">
										<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16" fill="none">
											<path d="M11.6675 3.69333L9.399 1.36667C8.541 0.486667 7.397 0 6.1815 0H3.25C1.456 0 0 1.49333 0 3.33333V12.6667C0 14.5067 1.456 16 3.25 16H9.75C11.544 16 13 14.5067 13 12.6667V6.99333C13 5.74667 12.5255 4.57333 11.6675 3.69333ZM10.751 4.63333C10.959 4.84667 11.1345 5.08 11.2775 5.33333H8.4565C8.099 5.33333 7.8065 5.03333 7.8065 4.66667V1.77333C8.0535 1.92 8.281 2.1 8.489 2.31333L10.7575 4.64L10.751 4.63333ZM11.7 12.6667C11.7 13.7667 10.8225 14.6667 9.75 14.6667H3.25C2.1775 14.6667 1.3 13.7667 1.3 12.6667V3.33333C1.3 2.23333 2.1775 1.33333 3.25 1.33333H6.1815C6.2855 1.33333 6.396 1.33333 6.5 1.34667V4.66667C6.5 5.76667 7.3775 6.66667 8.45 6.66667H11.687C11.7 6.77333 11.7 6.88 11.7 6.99333V12.6667ZM3.3085 8.66667H2.6C2.2425 8.66667 1.95 8.96667 1.95 9.33333V12.2933C1.95 12.5267 2.132 12.7067 2.353 12.7067C2.574 12.7067 2.756 12.52 2.756 12.2933V11.48H3.302C4.069 11.48 4.693 10.8467 4.693 10.0733C4.693 9.3 4.069 8.66667 3.302 8.66667H3.3085ZM3.3085 10.6467H2.769V9.5H3.315C3.627 9.5 3.8935 9.76 3.8935 10.0733C3.8935 10.3867 3.627 10.6467 3.315 10.6467H3.3085ZM11.063 9.08667C11.063 9.32 10.881 9.5 10.66 9.5H9.5615V10.26H10.3675C10.595 10.26 10.7705 10.4467 10.7705 10.6733C10.7705 10.9 10.5885 11.0867 10.3675 11.0867H9.5615V12.2867C9.5615 12.52 9.3795 12.7 9.1585 12.7C8.9375 12.7 8.7555 12.5133 8.7555 12.2867V9.08C8.7555 8.84667 8.9375 8.66667 9.1585 8.66667H10.66C10.8875 8.66667 11.063 8.85333 11.063 9.08V9.08667ZM6.5585 8.67333H5.85C5.4925 8.67333 5.2 8.97333 5.2 9.34V12.3C5.2 12.5333 5.382 12.6733 5.603 12.6733C5.824 12.6733 6.552 12.6733 6.552 12.6733C7.319 12.6733 7.943 12.04 7.943 11.2667V10.08C7.943 9.30667 7.319 8.67333 6.552 8.67333H6.5585ZM7.137 11.2667C7.137 11.58 6.8705 11.84 6.5585 11.84H6.019V9.50667H6.565C6.877 9.50667 7.1435 9.76667 7.1435 10.08V11.2667H7.137Z" fill="#1912D3"></path>
										</svg>
									</a>
									<?php if (User::is_admin()) { ?>
										<a href="<?= base_url() ?>payments/edit/<?= $p->p_id ?>" data-original-title="<?= lang('hd_lang.edit_payment') ?>">
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
												<g clip-path="url(#clip0_1514_208)">
													<path d="M12.4373 0.619885L4.30927 8.74789C3.99883 9.05665 3.75272 9.42392 3.58519 9.82845C3.41766 10.233 3.33203 10.6667 3.33327 11.1046V11.9999C3.33327 12.1767 3.4035 12.3463 3.52853 12.4713C3.65355 12.5963 3.82312 12.6666 3.99993 12.6666H4.89527C5.33311 12.6678 5.76685 12.5822 6.17137 12.4146C6.57589 12.2471 6.94317 12.001 7.25193 11.6906L15.3799 3.56255C15.7695 3.172 15.9883 2.64287 15.9883 2.09122C15.9883 1.53957 15.7695 1.01044 15.3799 0.619885C14.9837 0.241148 14.4567 0.0297852 13.9086 0.0297852C13.3605 0.0297852 12.8335 0.241148 12.4373 0.619885ZM14.4373 2.61989L6.30927 10.7479C5.93335 11.1215 5.42527 11.3318 4.89527 11.3332H4.6666V11.1046C4.66799 10.5745 4.87831 10.0665 5.25193 9.69055L13.3799 1.56255C13.5223 1.42652 13.7117 1.35061 13.9086 1.35061C14.1055 1.35061 14.2949 1.42652 14.4373 1.56255C14.5772 1.7029 14.6558 1.89301 14.6558 2.09122C14.6558 2.28942 14.5772 2.47954 14.4373 2.61989Z" fill="#1912D3"></path>
													<path d="M15.3333 5.986C15.1565 5.986 14.987 6.05624 14.8619 6.18126C14.7369 6.30629 14.6667 6.47586 14.6667 6.65267V10H12C11.4696 10 10.9609 10.2107 10.5858 10.5858C10.2107 10.9609 10 11.4696 10 12V14.6667H3.33333C2.8029 14.6667 2.29419 14.456 1.91912 14.0809C1.54405 13.7058 1.33333 13.1971 1.33333 12.6667V3.33333C1.33333 2.8029 1.54405 2.29419 1.91912 1.91912C2.29419 1.54405 2.8029 1.33333 3.33333 1.33333H9.36133C9.53815 1.33333 9.70771 1.2631 9.83274 1.13807C9.95776 1.01305 10.028 0.843478 10.028 0.666667C10.028 0.489856 9.95776 0.320286 9.83274 0.195262C9.70771 0.0702379 9.53815 0 9.36133 0L3.33333 0C2.4496 0.00105857 1.60237 0.352588 0.97748 0.97748C0.352588 1.60237 0.00105857 2.4496 0 3.33333L0 12.6667C0.00105857 13.5504 0.352588 14.3976 0.97748 15.0225C1.60237 15.6474 2.4496 15.9989 3.33333 16H10.8953C11.3333 16.0013 11.7671 15.9156 12.1718 15.7481C12.5764 15.5806 12.9438 15.3345 13.2527 15.024L15.0233 13.252C15.3338 12.9432 15.58 12.576 15.7477 12.1715C15.9153 11.767 16.0011 11.3332 16 10.8953V6.65267C16 6.47586 15.9298 6.30629 15.8047 6.18126C15.6797 6.05624 15.5101 5.986 15.3333 5.986ZM12.31 14.0813C12.042 14.3487 11.7031 14.5337 11.3333 14.6147V12C11.3333 11.8232 11.4036 11.6536 11.5286 11.5286C11.6536 11.4036 11.8232 11.3333 12 11.3333H14.6167C14.5342 11.7023 14.3493 12.0406 14.0833 12.3093L12.31 14.0813Z" fill="#1912D3"></path>
												</g>
												<defs>
													<clipPath id="clip0_1514_208">
														<rect width="16" height="16" fill="white"></rect>
													</clipPath>
												</defs>
											</svg>
										</a>
										<?php if ($p->refunded == 'No') { ?>
											<a href="<?= base_url() ?>payments/refund/<?= $p->p_id ?>" data-toggle="ajaxModal">
												<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
													<g clip-path="url(#clip0_1514_202)">
														<path d="M9.23001 11.5113L7.05535 13.686C6.42396 14.3005 5.57602 14.6417 4.69498 14.6358C3.81394 14.6299 2.97065 14.2773 2.34755 13.6544C1.72446 13.0315 1.37168 12.1883 1.36552 11.3073C1.35937 10.4262 1.70035 9.57819 2.31468 8.94664L4.48935 6.76997C4.61435 6.64488 4.68455 6.47525 4.68448 6.2984C4.68442 6.12155 4.61411 5.95198 4.48901 5.82697C4.36392 5.70197 4.19429 5.63177 4.01745 5.63184C3.8406 5.6319 3.67102 5.70221 3.54601 5.8273L1.37201 8.00397C0.493528 8.8829 0.00017586 10.0748 0.00048843 11.3175C0.000801 12.5602 0.494753 13.7518 1.37368 14.6303C2.25261 15.5088 3.44451 16.0021 4.68719 16.0018C5.92987 16.0015 7.12153 15.5076 8.00001 14.6286L10.1747 12.454C10.2961 12.3282 10.3633 12.1598 10.3618 11.985C10.3603 11.8102 10.2902 11.643 10.1666 11.5194C10.043 11.3958 9.87575 11.3257 9.70095 11.3242C9.52615 11.3227 9.35775 11.3899 9.23201 11.5113H9.23001Z" fill="#1912D3" />
														<path d="M14.6292 1.37402C14.1954 0.937226 13.6792 0.590869 13.1106 0.355014C12.542 0.119159 11.9322 -0.0015043 11.3166 1.64272e-05C10.7013 -0.00161806 10.0918 0.118735 9.52329 0.354117C8.9548 0.589499 8.43861 0.935241 8.00457 1.37135L5.82657 3.54668C5.70148 3.67169 5.63117 3.84127 5.6311 4.01811C5.63104 4.19496 5.70123 4.36459 5.82624 4.48968C5.95124 4.61478 6.12082 4.68509 6.29767 4.68515C6.47452 4.68521 6.64415 4.61502 6.76924 4.49002L8.94591 2.31535C9.25627 2.00312 9.62549 1.75555 10.0322 1.58699C10.4389 1.41843 10.875 1.33222 11.3152 1.33335C11.9781 1.33357 12.626 1.5303 13.177 1.89868C13.7281 2.26706 14.1575 2.79055 14.4111 3.40296C14.6647 4.01538 14.731 4.68923 14.6017 5.33933C14.4724 5.98944 14.1532 6.58661 13.6846 7.05535L11.5099 9.23002C11.3848 9.35511 11.3145 9.52477 11.3145 9.70168C11.3145 9.87859 11.3848 10.0483 11.5099 10.1734C11.635 10.2984 11.8047 10.3687 11.9816 10.3687C12.1585 10.3687 12.3281 10.2984 12.4532 10.1734L14.6279 8.00002C15.5053 7.12075 15.9981 5.92942 15.9984 4.68729C15.9986 3.44517 15.5062 2.25364 14.6292 1.37402Z" fill="#1912D3" />
														<path d="M9.52872 5.52845L5.52872 9.52845C5.46505 9.58995 5.41426 9.66351 5.37932 9.74485C5.34438 9.82618 5.32599 9.91366 5.32522 10.0022C5.32445 10.0907 5.34132 10.1785 5.37484 10.2604C5.40836 10.3424 5.45786 10.4168 5.52046 10.4794C5.58305 10.542 5.65749 10.5915 5.73942 10.625C5.82135 10.6585 5.90914 10.6754 5.99765 10.6746C6.08617 10.6738 6.17365 10.6555 6.25499 10.6205C6.33633 10.5856 6.40989 10.5348 6.47139 10.4711L10.4714 6.47112C10.5928 6.34538 10.66 6.17698 10.6585 6.00218C10.657 5.82738 10.5869 5.66018 10.4633 5.53657C10.3397 5.41297 10.1725 5.34285 9.99765 5.34133C9.82286 5.33981 9.65446 5.40701 9.52872 5.52845Z" fill="#1912D3" />
													</g>
													<defs>
														<clipPath id="clip0_1514_202">
															<rect width="16" height="16" fill="white" />
														</clipPath>
													</defs>
												</svg>
											</a>
									<?php }
									} ?>
									<a href="<?= base_url() ?>payments/delete/<?= $p->p_id ?>" data-toggle="ajaxModal" data-bs-toggle="modal" data-bs-target="#delete-modal-div">
										<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
											<g clip-path="url(#clip0_1514_211)">
												<path d="M13.9999 2.66667H11.9333C11.7785 1.91428 11.3691 1.23823 10.7741 0.752479C10.179 0.266727 9.43472 0.000969683 8.66659 0L7.33325 0C6.56512 0.000969683 5.8208 0.266727 5.22575 0.752479C4.63071 1.23823 4.22132 1.91428 4.06659 2.66667H1.99992C1.82311 2.66667 1.65354 2.7369 1.52851 2.86193C1.40349 2.98695 1.33325 3.15652 1.33325 3.33333C1.33325 3.51014 1.40349 3.67971 1.52851 3.80474C1.65354 3.92976 1.82311 4 1.99992 4H2.66659V12.6667C2.66764 13.5504 3.01917 14.3976 3.64407 15.0225C4.26896 15.6474 5.11619 15.9989 5.99992 16H9.99992C10.8836 15.9989 11.7309 15.6474 12.3558 15.0225C12.9807 14.3976 13.3322 13.5504 13.3333 12.6667V4H13.9999C14.1767 4 14.3463 3.92976 14.4713 3.80474C14.5963 3.67971 14.6666 3.51014 14.6666 3.33333C14.6666 3.15652 14.5963 2.98695 14.4713 2.86193C14.3463 2.7369 14.1767 2.66667 13.9999 2.66667ZM7.33325 1.33333H8.66659C9.0801 1.33384 9.48334 1.46225 9.821 1.70096C10.1587 1.93967 10.4142 2.27699 10.5526 2.66667H5.44725C5.58564 2.27699 5.84119 1.93967 6.17884 1.70096C6.5165 1.46225 6.91974 1.33384 7.33325 1.33333ZM11.9999 12.6667C11.9999 13.1971 11.7892 13.7058 11.4141 14.0809C11.0391 14.456 10.5304 14.6667 9.99992 14.6667H5.99992C5.46949 14.6667 4.96078 14.456 4.58571 14.0809C4.21063 13.7058 3.99992 13.1971 3.99992 12.6667V4H11.9999V12.6667Z" fill="#1912D3" />
												<path d="M6.66667 11.9998C6.84348 11.9998 7.01305 11.9296 7.13807 11.8046C7.2631 11.6796 7.33333 11.51 7.33333 11.3332V7.33317C7.33333 7.15636 7.2631 6.98679 7.13807 6.86177C7.01305 6.73674 6.84348 6.6665 6.66667 6.6665C6.48986 6.6665 6.32029 6.73674 6.19526 6.86177C6.07024 6.98679 6 7.15636 6 7.33317V11.3332C6 11.51 6.07024 11.6796 6.19526 11.8046C6.32029 11.9296 6.48986 11.9998 6.66667 11.9998Z" fill="#1912D3" />
												<path d="M9.33341 11.9998C9.51023 11.9998 9.67979 11.9296 9.80482 11.8046C9.92984 11.6796 10.0001 11.51 10.0001 11.3332V7.33317C10.0001 7.15636 9.92984 6.98679 9.80482 6.86177C9.67979 6.73674 9.51023 6.6665 9.33341 6.6665C9.1566 6.6665 8.98703 6.73674 8.86201 6.86177C8.73699 6.98679 8.66675 7.15636 8.66675 7.33317V11.3332C8.66675 11.51 8.73699 11.6796 8.86201 11.8046C8.98703 11.9296 9.1566 11.9998 9.33341 11.9998Z" fill="#1912D3" />
											</g>
											<defs>
												<clipPath id="clip0_1514_211">
													<rect width="16" height="16" fill="white" />
												</clipPath>
											</defs>
										</svg>
									</a>
								</div>
							</td>
						</tr>
					<?php } 
							}
					?>
				</table>
			</div>
			<div class="hs-table-pagination">
				 <div class="showingEntriesWrap">
					 <?php
					 $totalItems = $pager->getTotal(); // Get total number of items from the pager
					 $currentStart = ($pager->getCurrentPage() - 1) * $perPage + 1; // Calculate the start index of the current page
					 $currentEnd = min($currentStart + $perPage - 1, $totalItems); // Calculate the end index of the current page

					 $showEntry = "Showing $currentStart to $currentEnd of $totalItems entries";

					 ?>
					 <p><?= $showEntry; ?></p>
				</div>
				<div class="hs-pagination-wrap">
					<ul class="hs-pagination">
						<div class="row">
							<?php if (!empty($servers)) : ?>
							<!-- If there are items, display the pagination links -->
							<?php if ($pager) : ?>
							<ul class="pagination">
								<?php
								$pager->setPath('payments');

								// Output Pagination Links
								echo $pager->links();
								?>
							</ul>
							<?php endif; ?>

							<?php else : ?>
							<!-- If there are no items, display the message -->
							<div class="col-12 text-center">
								<h1 class="text-center"><?= esc($message) ?></h1>
							</div>
							<?php endif ?>
						</div>
					</ul>
				</div>
			</div>
		</div>
	</div>
</section>


<?= $this->endSection() ?>